## Game > Gamebase > Upgrade Guide

## 2.21.2

### iOS

* Gamebase iOS SDK 2.21.1 에서 bitcode 를 활성화 한 후에 **아카이브 빌드**를 하면 에러가 발생합니다.
    * bitcode 사용을 원하시는 경우엔 위 이슈가 해결된 Gamebase iOS SDK 2.21.2 를 사용하시기 바랍니다.

## 2.21.0

### Android

* Gamebase Android SDK 2.21.0 은 jCenter 에는 잘못된 빌드가 배포되어, **jcenter()** 를 **mavenCentral()** 보다 먼저 선언 했다면 모든 Gamebase API 에서 크래시가 발생할 수 있습니다.
    * 정상적으로 배포된 Gamebase Android SDK 2.21.1 을 사용하시거나 **mavenCentral()** 을 **jcenter()** 보다 먼저 선언하시기 바랍니다.
* Maven Repository
    * jCenter 가 일반 사용자를 위한 서비스를 종료하여 ( [https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/](https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/) ) 더 이상 새로운 빌드는 업로드는 할 수 없게 되었습니다.(jCenter 의 접근 또한 2022 년 2월 1일에 종료됩니다.)
    * 그래서 Gamebase Android SDK 2.21.0 부터는 **jcenter()** 가 아닌 **mavenCentral()** 에서만 배포가 되므로 gradle repository 에 mavenCentral 을 추가하세요.

```groovy
repositories {
    // >>> For Gamebase SDK
    mavenCentral()
    ...
}
```

#### Line IdP

* Line IdP 를 사용하는 경우, Line SDK 업데이트로 인해 아래와 같이 Gradle 에 **JavaVersion.VERSION_1_8** 설정을 하지 않으면 빌드가 실패합니다.
* Line IdP 를 사용하는 경우, Line SDK 내부에 **android:allowBackup="false"** 로 선언되어 있어 어플리케이션 빌드시 Manifest merger 에서 fail 이 발생할 수 있습니다. 이렇게 빌드가 실패한다면 다음과 같이 application 태그에 **tools:replace="android:allowBackup"** 선언을 추가하시기 바랍니다.

```groovy
android {
    compileOptions {
        // >>> [Line IdP]
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    
}
```

```xml
<application
      tools:replace="android:allowBackup"
      ... >
```

### iOS

* Gamebase iOS SDK 2.21.0 에서 bitcode 를 사용할 경우 에러가 발생합니다.
    * bitcode 사용을 원하시는 경우엔 Gamebase iOS SDK 2.21.1 을 사용하시기 바랍니다.

## 2.20.2

### iOS

#### Facebook IdP

* In Gamebase iOS SDK 2.20.2, Facebook SDK has been updated to 9.1.0. 
    * Now the Facebook SDK needs additional settings, so please add the following value to the info.plist. If not, the system might crash.
        * FacebookAutoLogAppEventsEnabled
        * FacebookAdvertiserIDCollectionEnabled
* To find out more, see the [Facebook iOS SDK Guide](https://developers.facebook.com/docs/app-events/getting-started-app-events-ios).

## 2.19.0

### Android

#### Weibo IdP

* Alternating the call between Weibo IdP login and another IdP login in Gamebase Android SDK 2.19.0 will lead to a crash.
    * If the Weibo IdP is being used, please use Gamebase Android SDK 2.19.1 where the issue has been fixed.

## 2.18.2

### Android

#### Removed APIs

* In Gamebase Android SDK 2.6.0, the following features were removed after being deprecated.
    * **GamebaseConfiguration.Builder.setFCMSenderId()**
    * **GamebaseConfiguration.Builder.setTencentAccessKey()**
    * **GamebaseConfiguration.Builder.setTencentAccessId()**

## 2.18.0

### Android

#### Purchase Google

* Calling the Google item payment in Gamebase Android SDK 2.18.0 causes a crash.
    * Please use the Gamebase Android SDK 2.18.1 where the issue has been fixed.

## 2.17.0

### Android

* Calling Gamebase.ImageNotice.showImageNotices API in Gamebase Android SDK 2.17.0 causes a crash.
    * Please use Gamebase Android SDK 2.17.4 where the crash issues from 2.17.0 and custom scheme event failure from OS 5.0 - 6.0 have been fixed.

## 2.15.1

### iOS

* If the type **GamebaseEventCategory** defined by the SDK is used in place of the NSString, it has to be updated to **TCGBGamebaseEventCategory**.

## 2.15.0

### Android

#### Purchase Google

* If **gamebase-adapter-purchase-google** is being used, the previous Game Client Version must be set to **Update to the latest version required** if the Gamebase SDK version earlier than 2.15.0 is to be upgraded to 2.15.0 or later.
	* The Google Billing Client module has been updated. Because of this, when purchasing an item while different billing client versions have been applied to multiple devices, any resultant error could lead to a reprocessing problem.

## 2.6.0

### Unity

#### Android Limitation

* With Android Support Library upgraded to 28.0.0, an Android build fails in Unity 5, Unity 2017.1, and Unity 2017.2.  
	* If your Editor is below Unity 2017.3, install a higher version than Unity 2017.3, copy the 'Editor/Data/PlaybackEngines/AndroidPlayer/Tools/gradle/lib' folder and paste it to the same path of your current Unity Editor; then, modify the mainTemplate.gradle file like below.

```groovy
// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN
buildscript {
	repositories {
		jcenter()
        // >>> For download Gradle Android Plugin
        maven {
            url 'https://maven.google.com'
        }
	}

	dependencies {
		//classpath 'com.android.tools.build:gradle:2.1.0'
        // >>> Update Gradle Android Plugin version
        classpath 'com.android.tools.build:gradle:2.3.0'
	}
}
```

#### Firebase Push

* In case of using Firebase Cloud Messaging, download a google-services.json file from Firebase Console and convert it into XML. Include XML resource in your project.
    * XML resource is required in Gamebase version 2.6.0 or higher. Under 2.6.0, Firebase Push works without XML resource.
* Refer to the below guide for implementation.
    * [\[Game > Gamebase > Android Developer's Guide > Push > Settings > Firebase\]](./aos-push/#firebase)

#### Standalone

* Removed Japan Purchase
	* Faded out Japan Purchase.
	* If you're using GamebaseUnitySDK_IAPAdapter, please delete the folders like below:
        * Asset/Toast/Common
        * Asset/Toast/Core
        * Asset/Toast/IAP
        * Asset/Toast/Standalone

### Android

#### Limitation

* Changed the minSdkVersion from 15 (IceCreamSandwichMR1, 4.0.3) to 16 (JellyBean, 4.1).
	* When your minSdkVersion of the project is 15, since normal operation is not ensured for any device below OS 4.1, change it to 16.

#### Removed APIs

* Following functions have been removed: replace them with alternatives.
    * Removed **Gamebase.getAuthBanInfo()**: replace it with **Gamebase.getBanInfo()**.
    * Removed **Gamebase.getLanguageCode()**: replace it with **Gamebase.getDeviceLanguageCode()**.
    * Removed **new GamebaseConfiguration.Builder(void)**: replace it with  **GamebaseConfiguration.newBuilder()**.
    * Removed **new GamebaseConfiguration.Builder.setAppId()**: replace it with  **GamebaseConfiguration.newBuilder()**.
    * Removed **new GamebaseConfiguration.Builder.setAppVersion()**: replace it with **GamebaseConfiguration.newBuilder()**.

#### Changed/Deprecated APIs

* No need to call Gamebase.activeApp() any more since it is automatically called.
* Change the method of creating GamebaseConfiguration, which is required as parameter of Gamebase.initialize().
    * Call **GamebaseConfiguration.newBuilder()**, instead of **new GamebaseConfiguration.Builder(String, String)**.
* Do not call LaunchingStatus.isPlayable() any more.
	* See [\[Game > Gamebase > Android SDK User Guide > Initialization > Launching Information\]](./aos-initialization/#launching-information) and decide if game play is available according to the Launching Status Code.
* Purchase
    * Since store code cannot be changed, it must be delivered at  **GamebaseConfiguration.newBuilder()**.
        * Gamebase.Purchase.getStoreCode() / Gamebase.Purchase.setStoreCode() is scheduled to be removed. Do not use it again.
    * No need to call Gamebase.Purchase.requestRetryTransaction() any more.
* Push
    * Since Gamebase Android SDK 2.6.0, push messages must be sent out via menu of the **Push** tab on the Gamebase console.
        * For Gamebase Android SDK 2.6.0 or lower versions, push must be sent from the **Push(Old)** tab of the Gamebase console.
    * No need to call GamebaseConfiguration.Builder.setFCMSenderId() any more.
    * When GamebaseConfiguration.Builder.setTencentAccessKey(),  GamebaseConfiguration.Builder.setTencentAccessId() is being called, remove the API call and declare for build.gradle as follows:

```groovy
android {
    defaultConfig {
        ...
        // >>> For Tencent Push Notification
        manifestPlaceholders = [
            XG_ACCESS_ID : "1234567890",
            XG_ACCESS_KEY : "ABCDEFGHIJKL",
        ]
    }
}
```

## 2.4.4

### Unity

* Updated the setting tool.
    * Due to changes in the folder structure, the previous SettingTool must be completely removed before re-installed. 

## 2.2.2

### Unity

* Changed the variable name from **storeCodeAOS** to **storeCodeAndroid** for the GamebaseUnitySDKSettings class.
    * If there is any code or prefab which defines store code in reference of **storeCodeAOS**, change the variable to **storeCodeAndroid**, so as variable reference does not fail.

## 2.2.0

### Unity

* Changed the Package Name of GamebaseMainActivity.
    * Unless the MainActivity declaration of AndroidManifest.xml is changed like below, crash may occur:
    * **com.toast.gamebase.activity.GamebaseMainActivity** -> **com.toast.android.gamebase.activity.GamebaseMainActivity**

```xml
<manifest>
    ...
    <application>
    ...
        <activity android:name="com.toast.android.gamebase.activity.GamebaseMainActivity"
            android:launchMode="singleTask"
            android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    ...
    </application>
    ...
</manifest>
```

## 2.1.0

### Common

#### Removed APIs

* Removed TransferKey which is not used.
	* If you need guest account transfer, go to [\[Game > Gamebase > Unity SDK User Guide > Authentication > TransferAccount\]](./unity-authentication/#transferaccount), updated as of Gamebase SDK 2.2.1.
