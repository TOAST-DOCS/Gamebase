## Game > Gamebase > コンソール使用ガイド > クーポン

ゲーム運営中に、ゲームユーザーに配布するクーポンを大量に作成して管理できる機能です。

## Coupon Publish

アプリ内で使用できるクーポンを発行または検索できます。

### Search Coupon publish

検索条件にマッチしたクーポン発行履歴を検索します。

![gamebase_ban_01_201812](http://static.toastoven.net/prod_gamebase/gamebase_coupon_01_201912.png)

**検索条件**

- **状態**：(必須)クーポンの現在進行状態。全て、有効、無効を選択できます。
- **有効期間**：(必須)選択した期間に使用できるクーポンリストを照会します。
- **クーポン名**：登録したクーポン名を基準に検索します。

**検索結果**

- **クーポン名**：発行したクーポンの名前
- **クーポンタイプ**：発行したクーポンのタイプ
- **支給アイテム**：発行時に登録したアイテム名。登録したアイテムが複数の場合、代表アイテムの他N個と表示
- **ストア**：クーポンを使用できるストア情報です。
- **使用/発行**：発行したクーポンの総使用数/総発行数情報
- **有効期間**：クーポン使用可能期間
- **発行日時**：発行した日時情報
- **クーポン使用履歴**：発行したクーポンの使用履歴情報を検索する画面に移動
- **ダウンロード**：発行したクーポンの詳細コードリストのダウンロード
- **支給アイテム**：発行したクーポンの登録可否を表示

### Publish coupon

クーポン発行検索画面で**登録**ボタンを押すとクーポンを発行できます。
![gamebase_coupon_02_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_02_202004_ja.png)

#### (1)クーポンタイプ
発行するクーポンのタイプを設定できます。
各タイプの内容は下記のとおりです。
現在はシリアルクーポンのみ提供していますが、今後他のタイプのクーポンも提供する予定です。
- **シリアル**：任意のクーポン番号を作成してクーポンコードを発行します。
- **キーワード**：指定されたキーワードの名前をユーザが使用できるクーポンコードで発行します。

#### (2)クーポン名
発行したクーポンの目的を把握できるクーポン名を入力します。

#### (3)クーポンコード

**キーワードクーポン発行時*にユーザーが使用できる固有クーポンコードを入力します。

#### (4)ストア
発行したクーポンを使用できるストアを選択します。
現在は**全て**のクーポンのみ発行可能です。今後、ストアごとにクーポンを発行できるように項目を追加する予定です。

#### (5)有効期間
発行したクーポンを使用できる期間を設定します。

#### 6. 発行数

発行時に作成するクーポンコードの数を設定します。
1回のリクエストで最大100万個のクーポンコードを作成できます。

#### 7. ユーザー別使用可能数

1人のユーザーが最大で使用できるクーポンの数を設定します。
設定できる最大数は99個です。無制限に使用できるようにするには、0に設定します。

#### 8. アイテム

クーポンコードの登録時に支給するアイテム情報を入力します。
支給するアイテムを選択し、右に支給数を入力します。
アイテムを選択するには、クーポンアイテムメニューから先にアイテムを登録する必要があります。


> [参考]
>
> クーポンアイテムを登録する方法は[Coupon Item](./oper-coupon/#Coupon_Item)を参照してください。

### Update publish coupon

발급한 쿠폰 정보를 수정하려면 상세 정보에서 **수정** 버튼을 클릭합니다.
이미 발급한 쿠폰 코드 타입은 수정할 수 없으므로 새 타입의 쿠폰을 발급하려면 발급 정보를 새로 등록해야 합니다.

![gamebase_ban_01_201812](https://static.toastoven.net/prod_gamebase/Operators_Guide/gamebase_coupon_03_202011.png)

#### (1)クーポン名
発行したクーポンの目的を把握できるクーポン名を入力します。

#### (2)ストア
発行したクーポンを使用できるストアを選択します。
現在は**全て**のクーポンのみ発行可能です。今後、ストアごとにクーポンを発行できるように項目を追加する予定です。

#### (3)有効期間
発行したクーポンを使用できる期間を設定します。

#### (4)ユーザー別使用可能数
発行したクーポンを、1人のユーザーが使用できる最大数を設定します。
現在設定できる最大数は100個で、0に設定すると無制限で使用可能に設定できます。

#### (5)アイテム
クーポンコード登録時に支給するアイテム情報を入力します。
支給するアイテムを選択し、右側の欄に該当アイテムの支給数を入力します。
アイテムを登録するには、クーポンアイテムメニューで先にアイテムを登録する必要があります。

#### (6)クーポン送信
発行されたクーポン情報を利用してユーザーに直接クーポンを送信できる機能を提供します。

![gamebase_ban_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_coupon_04_202003.png)
##### (1)送信タイプ：送信タイプを選択します。 MMS/SMSをサポートし、MMSの場合はタイトルを追加で入力して送信する必要があります。

##### (2)テンプレート選択：NHN Cloud Cloud SMSサービスでテンプレートを登録している場合は、テンプレートを選択して送信できます。登録されたテンプレートがない場合は選択する必要がありません。

##### (3)広告性かどうか：送信するSMSが広告性かどうかを選択します。広告性で送信する場合(広告)、[無料受信拒否]文字列が含まれている場合のみ、SMSを送信できる点に注意してください。

##### (4)送信番号：NHN Cloud Cloud SMSに登録した送信番号を選択できます。この番号は受信者に送信者番号として表示されます。

##### (5)送信タイプ：即時/予約送信を選択できます。即時送信の場合、送信ボタンを押すとすぐにSMSが送信され、予約送信の場合は指定した時間にSMSが送信されます。

##### (6)タイトル：MMS送信時、MMSのタイトルを指定します。 MMS送信の場合にのみ入力できます。

##### (7)内容：送信する詳細内容を入力します。 ##code##文字列がクーポンに置換される文字列で、この文字列が含まれていない場合は送信できませんので注意してください。

##### (8)受信拒否番号：NHN Cloud Cloud SMSに登録されている受信拒否番号を選択します。広告性SMSを送信する場合、この項目を内容に入力する必要があります。送信画面での選択項目は参考用に表示するために選択される値のため、送信時に注意してください。

##### (9)受信番号：受信対象をファイルを利用して登録します。 **番号**または**番号/クーポン**の形式で登録することができます。番号だけ入力されている場合、割り当てられるクーポンは発行されたクーポンから順番に割り当てて送信します。

##### (10)テスト送信：入力した形式を元にテスト送信ができます。受信する番号を入力して送信ボタンを押すと、入力した番号にテストSMSが送信されます。実際に送信する前にテスト送信を行い、実際の受信形式を確認した後に送信することを推奨します。

> [参考]
>
> クーポンアイテムを登録する方法は[Coupon Item](./oper-coupon/#Coupon Item)を参照してください。

#### 7. クーポン追加発行
クーポンタイプがシリアルの場合、1回10万個ずつ、最大100個まで(初期発行数を含めて)追加で発行できます。
![gamebase_ban_01_201812](https://static.toastoven.net/prod_gamebase/Operators_Guide/gamebase_coupon_11_202011.png)

#### 8. クーポン統計
クーポン発行詳細情報画面の下部でSMS送信履歴を照会することができ、送信に関連する統計の照会およびファイルダウンロードが行えます。
![gamebase_ban_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_coupon_05_202006.png)

リクエスト統計項目を利用して実際に送信したSMSの送信統計を確認することができます。右側のダウンロードリクエストボタンを押して送信結果の詳細履歴をダウンロードして確認できます。
ダウンロードをリクエストした後の状態は次の通りです。
- **作成準備中**：ダウンロードリクエストが正常に完了している状態です。
- **作成中**：リクエストしたダウンロードファイルを作成中です。
- **ダウンロード**：ダウンロードファイルの作成が完了している場合、ダウンロードボタンが有効になり、ボタンを押すと送信詳細履歴をダウンロードできます。

## Coupon history
発行したクーポンの使用履歴を照会できる機能を提供します。
検索条件に応じて、下記のような検索画面を提供します。

### クーポンコード別照会
クーポンコードを直接入力して、使用履歴を照会できます。
![gamebase_coupon_04_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_04_202004_ja.png)

### ユーザーID別照会
ユーザーIDから該当ユーザーがクーポンを使用した履歴を照会できます。
![gamebase_coupon_05_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_05_202004_ja.png)

### クーポン名照会
クーポン名およびその他の検索条件で使用履歴を照会できます。
![gamebase_coupon_06_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_06_202004_ja.png)
(1) **クーポン名**：クーポン発行メニューから、発行したクーポンを選択できます。
(2) **使用有無**：使用有無を選択して照会できる機能を提供します。現在は使用したクーポンのみ照会可能で、今後は別の状態の検索条件も提供する予定です。
(3) **クーポン使用日**：期間を設定して該当期間に使用したクーポンのみを照会できる機能を提供します。

## Coupon Item
クーポンコード使用時に支給するクーポンアイテムを照会、管理できます。

### クーポンアイテム照会
登録されたクーポンアイテムの内訳を照会できます。
フィルタを使い、アイテムID/アイテム名で検索することもできます。
![gamebase_coupon_07_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_07_202004_ja.png)

### クーポンアイテムの登録
クーポンコード使用時に支給するアイテムを登録します。
アイテムは1件ずつ入力するか、ファイルを通して登録できます。

#### 1件登録
![gamebase_coupon_08_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_08_202004_ja.png)

##### (1)アイテムID
アプリ内に登録されたアイテムの固有IDを入力します。クーポンコード使用時、ここに入力された情報が実際のサーバーに結果データとして伝達されます。そのため、アイテムを提供することができるサーバーで区別することができる固有のアイテムIDを入力する必要があります。
アイテムIDは一度登録すると変更できないため、注意が必要です。

##### (2)アイテム名
登録されたアイテムを区別することができるアイテム名を入力します。

#### ファイルアップロード

![gamebase_coupon_09_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_09_202004_ja.png)
一度に大量に登録したい時は、ファイルを利用して登録できます。
ファイルを利用して登録する場合は、一度に最大10,000件まで登録することができます。テンプレートファイルをダウンロードした後、該当の形式に合わせて作成したものをアップロードすると、正常にファイルを利用してアイテム登録作業を行うことができます。

### クーポンアイテムの修正
登録したアイテムの情報を修正することができます。該当アイテムを使用したくない場合は、「使用しない」に設定してクーポン発行時に該当アイテムが表示されないように変更できます。

> [参考]
>
> アイテムID情報は変更できないため、アイテムIDを間違えた場合は、新しいアイテムIDで再度登録する必要があります。

![gamebase_coupon_10_202004_ja](http://static.toastoven.net/prod_gamebase/gamebase_coupon_10_202004_ja.png)

#### (1)アイテム名
区別することができるアイテム名を入力します。

#### (2)使用有無
**使用**状態の場合にのみクーポン登録時にアイテムを追加できます。アイテムをクーポン登録画面で表示しない場合は、使用有無を**使用しない**に変更してください。最初のアイテム登録時は常に**使用**で登録されます。
