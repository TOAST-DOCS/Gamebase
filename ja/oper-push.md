## Game > Gamebase > Console ご利用ガイド > Push



アプリユーザーにPush通知を送信することができます。

Gamebaseでは、TOAST Pushサービスを使用してPush通知を送信します。



## Push



> <font color="red">[重要]</font><br/>

>

> サービス中のゲームで**Gamebase SDK 2.6.0以上**のバージョンを適用した場合に使用するメニューです。



プッシュを送信した履歴と登録されたプッシュの予約リストを確認できます。



![gamebase_push_01_201910](https://static.toastoven.net/prod_gamebase/gamebase_push_01_201910.png)



### Registered List



予約リストからプッシュを選択すると、プッシュの予想送信時間および登録情報の確認、**転送キャンセル**ボタンから予約送信のキャンセルを行うことができます。また**コピー**ボタンから登録されたプッシュの登録情報を利用してプッシュを新規で登録できます。



### Send History



送信履歴リストでプッシュを選択すると、転送されたプッシュの詳細履歴を照会できます。

**コピー**ボタンをクリックすると、送信されたプッシュの登録情報を利用して簡単にプッシュを登録できます。



![gamebase_push_02_201910](https://static.toastoven.net/prod_gamebase/gamebase_push_02_201910.png)

![gamebase_push_03_201910](https://static.toastoven.net/prod_gamebase/gamebase_push_03_201910.png)



### Register Push



新しいプッシュを登録するには、**登録**ボタンをクリックします。

コンソールに登録した値が実際の端末でどのように表示されるかを右側のプレビューで確認できます。



![gamebase_app_01_202004](https://static.toastoven.net/prod_gamebase/gamebase_push_04_202004.png)
![gamebase_push_05_201910](https://static.toastoven.net/prod_gamebase/gamebase_push_05_201910.png)



#### (1)送信タイプ



送信周期を選択します。

- **即時送信**：登録後、すぐにプッシュメッセージを送信します。

- **予約送信**：予約した時間にプッシュメッセージを送信します。ユーザーの端末国時間基準でプッシュメッセージを送信したい場合は、**現地時間基準で送信**を選択します。**現地時間基準で送信**を選択し、「2017-01-01 09:00」に設定すると、韓国端末を使用するユーザーは韓国時間「2017-01-01 09:00」に、イギリス端末を使用するユーザーはイギリス時間「2017-01-01 09:00」にプッシュメッセージを受信します。

- **繰り返し送信**：同じプッシュを周期的に送信します。ユーザーの端末国時間基準でプッシュメッセージを送信したい場合は、**現地時間基準で送信**を選択します。送信したい期間を選択し、該当期間に送信したい時刻を選択します。その後、選択した送信期間中に送信する周期を**毎日**、**毎週**、**毎月**基準で情報を入力します。

	- 毎日：毎日プッシュを送信します。

	- 毎週：送信したい曜日を選択して、特定曜日にのみプッシュを送信します。曜日は複数選択できます。

	- 毎月：毎月、希望する日にプッシュを送信します。日付(1～31)のみ入力でき、1個以上の日付を入力できます。例えば、1日、5日、10日に送信したい場合は1、5、10と入力すると該当の日付にプッシュが転送されます。



#### (2)送信対象

プッシュメッセージを送信する対象を選択します。

- **全体送信**：OSごとに選択できます。選択したOSを使用するユーザーは全員プッシュを受信します。

- **特定会員にのみ送信**：特定会員にのみプッシュメッセージを送信したい時に選択します。入力されたユーザーIDのプッシュトークンを登録した端末にプッシュメッセージを送信します。対象ユーザーが5個の端末でゲームをしている場合、5個の端末にプッシュを送信します。

- **グループ送信**：メッセージを送信したいユーザーリストをファイルで登録します。グループ送信は1回最大10,000人まで可能です。

- **タグ送信**：タグを利用してプッシュを送信できます。 **プッシュ - タグ** メニューから登録されたタグで送信でき、複数のタグも登録できます。タグフィルタは下記のような機能をサポートします。

	- AND：選択したタグを全て満たすユーザーにのみプッシュを送信します。

	- OR：選択したタグのうち、1つでも条件を満たすユーザーにプッシュを送信します。



#### (3)対象国



プッシュメッセージを送信する国を選択します。

- **全ての国**：すべてのユーザーにプッシュメッセージを送信します。

- **一部の国**：選択した国のユーザーにのみプッシュメッセージを送信します。

 追加したい国名を入力すると自動補完されます。入力したい国がない場合は[サポート](https://toast.com/support/inquiry)へご連絡ください。



> [参考]

>

> 国判断基準

> ユーザーの**USIM国コード**を基準に判断し、USIMがない場合、端末に設定されている国を基準にプッシュメッセージが表示されます。



#### (4)通知音(選択項目)



端末でプッシュを受信する時に再生される通知音を設定できます。

**通知音追加**ボタンから通知音を設定できます。未設定の場合はデフォルトの通知音が再生されます。

外部URLリンクまたはアプリ内の通知音ファイルのパスを入力します。





#### (5)メッセージタイプ



> [参考]

>

> 韓国情報通信網法を遵守するために提供している機能です。

> プッシュ送信時、情報性メッセージではない場合は「(広告)」という文言を冒頭に入力し、メッセージに連絡先と受信停止方法が記載されている必要があります。



- **広告性**：入力したメッセージの冒頭に「(広告)」という文言が追加されます。また入力した連絡先と受信停止方法が記載されて送信されます。全体送信などの広告性プッシュの場合、国内では情報通信網法を遵守するために必ず「広告性」メッセージとして送信する必要があります。

- **情報性**：入力したメッセージのみプッシュ送信されます。韓国端末ではない(USIM国コードが韓国ではない)ユーザーには情報性メッセージで転送してください。

**基本言語で自動翻訳**ボタンをクリックすると、基本言語に入力された内容を翻訳して各項目に設定された言語に合わせて入力されます。




> <font color="red">[重要]</font><br/>

>

> **広告性**を選択した後、入力メッセージに「(広告)」文言を入力すると「(広告)」文言が重複するため注意してください。



#### (6)送信メッセージ



ユーザーに表示するプッシュメッセージを入力します。



メッセージは複数の言語で登録できます。入力した言語以外の言語を使用するユーザーには基本言語に選択された言語で表示されます。言語を追加するには下の**メッセージ追加**ボタンをクリックします。リストにない言語を追加するには[サポート](https://toast.com/support/inquiry)へご連絡ください。



> [参考]

>

> プッシュメッセージを送信したのに端末にメッセージが届かない場合

> 大部分の場合、ユーザーのプッシュトークンを登録していない場合です。ユーザーのプッシュトークンが登録されているかを確認してください。

> プラットフォームでプッシュトークンを登録する方法は次の文書を参照してください。

>

> - [Android > Register Push](./aos-push/#2-register-push)

> - [iOS > Register Push](./ios-push/#2-register-push)

> - [Unity > Register Push](./unity-push/#2-register-push)



#### (7)メッセージ文字色(Only Android)



Androidの場合には端末に表示されるプッシュメッセージの文字色を指定できます。

タイトルと内容の色を指定できます。文字色選択ウィンドウで色を選択するか、RGB Hex値を直接入力して色を指定できます。

選択された文字色は右のプレビュー画面で確認できます。



#### (8) 大アイコン(Only Android)



**大アイコン追加**ボタンからプッシュ受信時に右側に表示されるアイコンのイメージを設定できます。

大アイコンイメージを設定してプッシュを転送すると、Android端末でのみイメージが表示され、iOSでは表示されません。

外部を選択し、表示するアイコンイメージの外部URLを入力するか、内部を選択してアプリ内に配布したアイコンイメージファイルのパスを入力します。

外部イメージの場合、右側のプレビューで該当アイコンを事前に確認できます。



#### (9)ボタン



プッシュ受信時にメッセージの下に表示されるボタンを最大3個まで設定できます。

4つの形式のボタンがあり、タイプごとに動作方式と設定する値が異なるため、下記のガイドを参照して設定してください。

- アプリを開く：プッシュメッセージ内のボタンをクリックすると、該当アプリを実行します。ボタン名のみ指定可能です。

- URLを開く：プッシュメッセージ内のボタンをクリックすると、コンソールで入力したURLに移動します。アプリスキーマを使って特定アプリの実行や、Webページへの接続を行うことができます。

- 応答：プッシュメッセージ内のボタンをクリックすると、応答できるウィンドウが実行されます。iOSの場合は転送ボタンの名前を設定できます。

- 閉じる：プッシュメッセージ内のボタンをクリックすると、プッシュを閉じます。ボタン名のみ指定可能です。



#### (10)メディア(iOS)



iOSプッシュ受信時に動的に実行されるメディアを追加できます。

**IMAGE**、**GIF**、**VIDEO**、**AUDIO**項目を設定できます。接続したい外部URLまたは内部ファイルパスを入力できます。



#### (11)メディア(Android)



Androidでプッシュ受信時に実行されるメディアを追加できます。

現在Androidでは**IMAGE**項目のみ設定できます。接続したい外部URLまたは内部ファイルパスを入力できます。



## Push(Old)

Gamebaseを通して送信されたPushの履歴と送信予約に登録されたリストを確認することができます。

![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_01_201812.png)

送信予定内訳にあるリストは、**Push Details**から送信をキャンセルすることもできます。



### Registered List



予約送信リストからPushを選択すると、Pushの予想送信時刻及び登録情報を確認することができます。

現在は予約送信に対するキャンセルのみ可能で、登録された情報を修正する機能は今後実装予定です。



### Send History



送信履歴リストからPushを選択すると、送信されたPushの詳細内訳を照会することができます。

**コピー**ボタンをクリックすると、送信されたPushの登録情報を利用して簡単にPushを登録することができます。

![gamebase_push_02_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_02_201812.png)





### Register Push



新しいPushを登録したい場合、**登録**ボタンをクリックします。



![gamebase_app_01_202004](https://static.toastoven.net/prod_gamebase/gamebase_push_old_03_202004.png)


#### (1) メッセージタイプ

> [参考]

> 韓国の「情報通信網法」を遵守するために提供される機能です。

> Pushメッセージを送信する際に情報提供型のメッセージでない場合は、「(広告)」という出だしでメッセージを始めなければならず、メッセージに連絡先と受信拒否の方法を含ませる必要があります。



- **広告型**：入力されたメッセージに「(広告)」という出だしが追加されます。また、追加で入力した連絡先と受信拒否の方法が一緒に送信されます。全体送信のようなPush型広告の場合、韓国国内では情報通信網法を遵守するために必ず「広告型」のメッセージとして送信しなければなりません。

- **情報提供型**：入力されたメッセージのみPushメッセージで送信されます。韓国の端末でない(USIMの国家コードが韓国ではない)ユーザーには、情報提供型メッセージとして送信してください。



> <font color="red">[重要]</font>

> **広告型**を選択した後、入力メッセージに「(広告)」という文言を入力すると、「(広告)」という文言が重複して表示されますので、ご注意ください。



#### (2) 送信対象

Pushメッセージを送信する対象を選択します。



- **全体送信**：OSごとに選択することができます。選択したOSを使用するユーザーは、すべてPushメッセージをを受信することになります。

- **特定の会員にのみ送信**：特定の会員にのみPushメッセージを送信したい場合に選択します。入力されたユーザーIDでPushトークンを登録したデバイスにPushメッセージを送信します。

- **グループ送信**：メッセージを送信したいユーザーリストをファイルで登録します。グループ送信は、1回に最大10,000人にまで送信できます。



#### (3) 送信タイプ

送信サイクルを選択します。



- **即送信**：登録後、直ちにPushメッセージを送信します。

- **予約送信**：予約した時間にPushメッセージを送信します。ユーザー端末の国家時間を基準にPushメッセージを送信したい場合、**現地時間を基準に送信**を選択します。**現地時間を基準に送信**を選択して、「2017-01-01 09:00」に設定した場合、韓国の端末を使用するユーザーは、韓国時間の「2017-01-01 09:00」に、英国の端末を使用するユーザーは、英国時間の「2017-01-01 09:00」にPushメッセージを受信します。



今後、予約送信の機能に繰り返し送信(毎日、毎週、毎月)する機能が追加で提供される予定です。



#### (4) 対象国家

Pushメッセージを送信する国家を選択します。



- **全体国家**：すべてのユーザーにPushメッセージを送信します。

- **一部国家**：選択した国家のユーザーにのみPushメッセージを送信します。

  追加したい国家名を入力すると自動で完成され、入力されます。入力した国家が表示されない場合、[カスタマーセンター](https://toast.com/support/inquiry)までご連絡ください。



> [参考]

> 国家判断基準

> ユーザーの**USIMの国家コード**を基に判断し、USIMがない場合は端末に設定されている国家を基にPushメッセージが表示されます。



#### (5) 送信メッセージ

ユーザーに表示するPushメッセージを入力します。

メッセージは複数の言語で登録でき、入力した言語以外の言語を使用するユーザーには、基本言語として選択された言語で表示されます。言語を追加したいときは右の**'+'**ボタンをクリックします。リストにない言語を追加したいときは、[カスタマーセンター](https://toast.com/support/inquiry)までご連絡ください。

**基本言語で自動翻訳**ボタンをクリックすると、基本言語に入力された内容を翻訳して各項目に設定された言語に合わせて入力されます。


> [参考]

> Pushメッセージを送信したものの、デバイスにメッセージが届かない場合

> ほとんどの場合、ユーザーのPushトークンが登録されていないのが原因です。ユーザーのPushトークンが登録されているかどうか確認してください。>

> プラットフォームでPushトークンを登録する方法は、次のドキュメントをご参考ください。

>

> - [Android > Register Push](./aos-push/#2-register-push)

> - [iOS > Register Push](./ios-push/#2-register-push)

> - [Unity > Register Push](./unity-push/#2-register-push)



## Tag



ユーザーを特定基準で括って転送できるタグ機能を提供します。



![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_06_201910.png)



TOAST Pushでプッシュ送信時に使用するタグ名を登録できます。







### Tag register



![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_09_201910.png)







### Tag detail



登録されたタグの管理および該当タグに登録されたユーザーのリストを管理できます。



![gamebase_push_01_201812](./image/Operators_Guide/gamebase_push_07_201911.png)



上部にある削除/修正ボタンで、タグの情報を修正および削除できます。下にあるユーザーID管理機能を使って、タグにユーザーを登録または削除できます。



#### ユーザー登録



##### 1件登録



![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_08_201910.png)



##### ファイル登録



![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_10_201910.png)



登録ボタンを押すと、上記のように登録ポップアップが表示され、直接IDを入力するかファイルを登録して入力可能です。



ファイル登録を利用して登録する場合は、一度に最大1000人まで登録可能です。







#### ユーザー削除



![gamebase_push_01_201812](https://static.toastoven.net/prod_gamebase/gamebase_push_11_201910.png)



削除したい場合、ユーザーリストで左側のチェックボックスを選択した後、削除ボタンからタグに登録されたユーザーを削除できます。
